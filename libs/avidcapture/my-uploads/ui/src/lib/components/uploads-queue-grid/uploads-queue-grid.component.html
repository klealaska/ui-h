<ax-table
  *ngIf="documents.length > 0"
  tableType="default"
  size="relaxed"
  [displayedColumns]="displayedColumns"
  [dataSource]="documentDataSource"
  [allowSort]="true"
  [customTemplate]="true"
  [customSort]="false"
  [virtualScroll]="false"
  [fixedColumns]="true"
  [matSortActive]="'dateReceived'"
  [matSortDirection]="'asc'"
  (matSortChange)="columnSorted.emit($event)"
  matSort
>
  <ng-container matColumnDef="checkbox">
    <th mat-header-cell *matHeaderCellDef>
      <ax-checkbox
        [noText]="true"
        [checked]="selection.hasValue() && isAllSelected()"
        [indeterminate]="selection.hasValue() && !isAllSelected()"
        (change)="$event ? selectAllRows() : null"
        data-cy="uploads-queue-header-checkbox"
      >
      </ax-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <ax-checkbox
        [noText]="true"
        [checked]="selection.isSelected(row)"
        [disabled]="row.uploadStatus && row.uploadStatus.toLowerCase() === pendingUploadStatus.Pending.toLowerCase()"
        (change)="selectRow(row)"
      >
      </ax-checkbox>
    </td>
  </ng-container>
  <ng-container matColumnDef="fileName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header="fileName">File name</th>
    <td
      [ngClass]="{
        'processing': row.uploadStatus && row.uploadStatus.toLowerCase() !== pendingUploadStatus.Completed.toLowerCase()
      }"
      mat-cell
      *matCellDef="let row"
    >
      <ng-template
        [ngIf]="!row.uploadStatus || row.uploadStatus.toLowerCase() === pendingUploadStatus.Completed.toLowerCase()"
        [ngIfElse]="completed"
      >
        <ax-link [size]="'lg'">
          <a class="cursor" (click)="openInvoiceEvent.emit(row)">{{ row.fileName }}</a>
        </ax-link>
      </ng-template>
      <ng-template #completed> {{ row.fileName }} </ng-template>
    </td>
  </ng-container>
  <ng-template [ngIf]="canViewAllBuyers">
    <ng-container matColumnDef="buyerName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="buyerName">Customer</th>
      <td
        [ngClass]="{
          'processing': row.uploadStatus && row.uploadStatus.toLowerCase() !== pendingUploadStatus.Completed.toLowerCase()
        }"
        mat-cell
        *matCellDef="let row"
      >
        {{ row.buyerName }}
      </td>
    </ng-container>
  </ng-template>
  <ng-container matColumnDef="dateReceived">
    <th mat-header-cell *matHeaderCellDef mat-sort-header="dateReceived">Upload date</th>
    <td
      [ngClass]="{
        'processing': row.uploadStatus && row.uploadStatus.toLowerCase() !== pendingUploadStatus.Completed.toLowerCase()
      }"
      mat-cell
      *matCellDef="let row"
    >
      {{ row.dateReceived | dateMilli:'LL/dd/yy hh:mma' }}
    </td>
  </ng-container>
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Upload status</th>
    <td
      [ngClass]="{
        'processing': row.uploadStatus && row.uploadStatus.toLowerCase() !== pendingUploadStatus.Completed.toLowerCase()
      }"
      mat-cell
      *matCellDef="let row"
    >
      {{ row.uploadStatus ?? pendingUploadStatus.Completed | uppercaseWord }}
    </td>
  </ng-container>
</ax-table>
